#!/usr/bin/env python3
"""
SwipeStyle Log Cleaner
=====================

Bu script log dosyalarÄ±nÄ± temizler.

KullanÄ±m:
    python clear_logs.py              # Sadece agent_output_log.txt'yi temizle
    python clear_logs.py --all        # Hem debug_log.txt hem agent_output_log.txt'yi temizle
    python clear_logs.py --backup     # Temizlemeden Ã¶nce backup al
"""

import argparse
import os
import shutil
from datetime import datetime

def backup_file(filename):
    """DosyayÄ± backup al"""
    if os.path.exists(filename):
        timestamp = datetime.now().strftime("%Y%m%d_%H%M%S")
        backup_name = f"{filename}.backup_{timestamp}"
        shutil.copy2(filename, backup_name)
        print(f"âœ… Backup alÄ±ndÄ±: {backup_name}")
        return backup_name
    return None

def clear_log_file(filename, create_header=True):
    """Log dosyasÄ±nÄ± temizle"""
    try:
        if os.path.exists(filename):
            with open(filename, 'w', encoding='utf-8') as f:
                if create_header and filename == 'agent_output_log.txt':
                    f.write("# SwipeStyle Agent Output Log\n")
                    f.write("# This file contains all responses generated by the agent\n")
                    f.write("# Format: [Timestamp] Response Type: Response Data\n")
                    f.write(f"# Cleared on: {datetime.now().strftime('%Y-%m-%d %H:%M:%S')}\n\n")
                elif create_header and filename == 'debug_log.txt':
                    f.write(f"# Debug log cleared on: {datetime.now().strftime('%Y-%m-%d %H:%M:%S')}\n")
            print(f"âœ… {filename} temizlendi")
        else:
            print(f"âš ï¸  {filename} dosyasÄ± bulunamadÄ±")
    except Exception as e:
        print(f"âŒ {filename} temizlenirken hata: {e}")

def main():
    parser = argparse.ArgumentParser(description='SwipeStyle Log Cleaner')
    parser.add_argument('--all', action='store_true', help='TÃ¼m log dosyalarÄ±nÄ± temizle')
    parser.add_argument('--backup', action='store_true', help='Temizlemeden Ã¶nce backup al')
    parser.add_argument('--no-header', action='store_true', help='BaÅŸlÄ±k ekleme')
    
    args = parser.parse_args()
    
    files_to_clear = ['agent_output_log.txt']
    if args.all:
        files_to_clear.append('debug_log.txt')
    
    print("ğŸ§¹ Log dosyalarÄ± temizleniyor...")
    
    # Backup al
    if args.backup:
        print("ğŸ“¦ Backup alÄ±nÄ±yor...")
        for filename in files_to_clear:
            backup_file(filename)
    
    # DosyalarÄ± temizle
    for filename in files_to_clear:
        clear_log_file(filename, create_header=not args.no_header)
    
    print("âœ¨ Temizlik tamamlandÄ±!")

if __name__ == '__main__':
    main()
